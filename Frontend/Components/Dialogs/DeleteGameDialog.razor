@using GameServiceProtos
@inject ISnackbar Snackbar


<MudDialog >
    <TitleContent>
        Deleting
    </TitleContent>
    <DialogContent>
        <MudText>Are you sure you want to delete the game @GameName?</MudText> 
        <MudText>This Action cannot be reversed!</MudText>
    </DialogContent>
    <DialogActions>
        <MudButton ButtonType="ButtonType.Button" Variant="Variant.Filled" Color="Color.Warning" OnClick="@Submit">Delete @GameName</MudButton>
    </DialogActions>

</MudDialog>




@code {
    [CascadingParameter] public required IMudDialogInstance MudDialog { get; set; }
    [Parameter] public required string GameName { get; set; }
    [Parameter] public required Task<Response> DeleteGame { get; set; }
    [Parameter] public required Task RefreshData { get; set; }

    
    private async Task Submit()
    {
        var response = await DeleteGame;
        if (response.Success)
        {
            Snackbar.Add($"{GameName} deleted", Severity.Success);
        }
        else
        {
            Snackbar.Add($"{GameName} could not not be deleted", Severity.Error);
        }
        MudDialog.Close(DialogResult.Ok(true));



    }




}